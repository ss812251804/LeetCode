<html>
<head>
  <title>给定一个整数数组 nums ，找到一个具有最大和的连续子数组（子数组最少包含一个元素），返回其最大和。</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="598"/>
<h1>给定一个整数数组 nums ，找到一个具有最大和的连续子数组（子数组最少包含一个元素），返回其最大和。</h1>

<div>
<span><div>给定一个整数数组 nums ，找到一个具有最大和的连续子数组（子数组最少包含一个元素），返回其最大和。</div><div>示例:</div><div>输入: [-2,1,-3,4,-1,2,1,-5,4],</div><div>输出: 6</div><div>解释: 连续子数组 [4,-1,2,1] 的和最大，为 6。</div><div>进阶:</div><div>如果你已经实现复杂度为 O(n) 的解法，尝试使用更为精妙的分治法求解。</div><div><br/></div><div><br/></div><div>设sum[i]为以第i个元素结尾且和最大的连续子数组。假设对于元素i，所有以它前面的元素结尾的子数组的长度都已经求得，那么以第i个元素结尾且和最大的连续子数组实际上，要么是以第i-1个元素结尾且和最大的连续子数组加上这个元素，要么是只包含第i个元素，即sum[i]</div><div>  = max(sum[i-1] + a[i], a[i])。可以通过判断sum[i-1] + a[i]是否大于a[i]来做选择，而这实际上等价于判断sum[i-1]是否大于0。由于每次运算只需要前一次的结果，因此并不需要像普通的动态规划那样保留之前所有的计算结果，只需要保留上一次的即可，因此算法的时间和空间复杂度都很小</div><div>class Solution {</div><div>    public int maxSubArray(int[] nums) {</div><div>        int sum=nums[0];</div><div>        int n=nums[0];</div><div>        for(int i=1;i&lt;nums.length;i++) {</div><div>            if(n&gt;0)n+=nums[i];</div><div>            else n=nums[i];</div><div>            if(sum&lt;n)sum=n;</div><div>        }</div><div>        return sum;</div><div><br/></div><div>    }</div><div>}</div><div><br/></div><div><br/></div><div>分治法：</div><div><br/></div><div><span style="font-weight: bold; font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: &quot;Times New Roman&quot;; mso-hansi-font-family: &quot;Times New Roman&quot;;-en-paragraph:true;">代码：</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">package newpackage4;</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">public class NewMain {</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">   </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">public static int maxsub(int left, int right, int a[]) {</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">       </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">int center, i;</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">       </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">int sum, left_sum, right_sum;</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">       </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">int left_max, right_max;</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">       </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">center = (left + right) / 2;</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">       </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">if (left == right)//</span><span style="font-weight: bold; font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: &quot;Times New Roman&quot;; mso-hansi-font-family: &quot;Times New Roman&quot;;-en-paragraph:true;">此处重要，递归出口</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">       </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">{</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">           </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">if (a[left] &gt; 0) {</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">               </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">return a[left];</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">           </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">} else {</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">               </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">return 0;</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">           </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">}</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">       </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">} else {</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;"> </span> <span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">          </span><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">left_sum = maxsub(left, center, a);</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">           </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">right_sum = maxsub(center + 1, right, a);</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">           </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">sum = 0;</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">           </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">left_max = 0;</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">           </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">for (i = center; i &gt;= left; i--) {</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">               </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">sum += a[i];</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">               </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">if (sum &gt; left_max) {</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">                   </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">left_max = sum;</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">               </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">}</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">           </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">}</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">           </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">sum = 0;</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">           </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">right_max = 0;</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">           </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">for (i = center + 1; i &lt;= right; i++) {</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">               </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">sum += a[i];</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">               </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">if (sum &gt; right_max) {</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">  </span> <span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">                 </span><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">right_max = sum;</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">               </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">}</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">           </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">}</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">           </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">sum = right_max + left_max;</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">           </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">if (sum &lt; left_sum) {</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">               </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">sum = left_sum;</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">           </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">}</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">           </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">if (sum &lt; right_sum) {</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">               </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">sum = right_sum;</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">           </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">}</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">       </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">}</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">       </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">return sum;</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">   </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">}</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;"> </span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">   </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">public static void main(String[] args) {</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">       </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">int a[] = {2, 11, -4, 13, -5, 1};</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">       </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">int b = maxsub(0, a.length - 1, a);</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">       </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">System.out.println(&quot;</span><span style="font-weight: bold; font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: &quot;Times New Roman&quot;; mso-hansi-font-family: &quot;Times New Roman&quot;;-en-paragraph:true;">分治法求最大子段和</span><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">:&quot; + b);</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-weight: bold; font-size: 12.0pt; mso-spacerun: yes;-en-paragraph:true;">   </span> <span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">}</span></div><div><span style="font-weight: bold; font-size: 12.0pt;-en-paragraph:true;">}</span></div></span>
</div></body></html> 